# Проект "HomeWork"

## Описание:

Проект "HomeWork", будет готовить данные для отображения в новом виджете на бэкенде .

## Установка:

1. Клонируйте репозиторий:
```
git clone https://github.com/Vitaliy-Avdoshkin/vitaliy_avdoshkin_HomeWork.git
```
## Конфигурация
1. Создайте виртуальное окружение poetry.
```
poetry env
```
2. Установите библиотеки Flake8, black, isort, mypy в группу lint.
```
poetry add --group lint flake8
poetry add --group lint black
poetry add --group lint isort
poetry add --group lint mypy
```


## Использование:

1. Используйте код из модуля masks для получения масок номера счета и номера банковской карты по отдельности.
2. Используйте код из модуля widget для получения масок номера счета и номера банковской карты вместе и даты операции.
3. Используйте код из модуля processing для получения информации по операциям.

## Примеры работы программы

# Модуль masks.py

Пример работы функции, возвращающей маску карты
7000792289606361     # входной аргумент
7000 79** **** 6361  # выход функции

Пример работы функции, возвращающей маску счета
73654108430135874305  # входной аргумент
**4305  # выход функции

# Модуль widget.py

Пример для карты
Visa Platinum 7000 7922 8960 6361  # входной аргумент
Visa Platinum 7000 79** **** 6361  # выход функции

Пример для счета
Счет 73654108430135874305  # входной аргумент
Счет **4305  # выход функции

Пример для даты
2018-07-11T02:26:18.671407 # входной аргумент
11.07.2018 # выход функции

# Модуль processing.py

1. Функция, которая принимает на вход список словарей и значение для ключа 
state
 (опциональный параметр со значением по умолчанию 
EXECUTED
) и возвращает новый список, содержащий только те словари, у которых ключ 
state
 содержит переданное в функцию значение.

Вход функции
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

Выход функции со статусом по умолчанию EXECUTED
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

Выход функции, если вторым аргументов передано 'CANCELED'
[{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]


2. Функция, которая принимает на вход список словарей и возвращает новый список, в котором исходные словари отсортированы по убыванию даты (ключ 
date
). Функция принимает два аргумента, второй необязательный задает порядок сортировки (убывание, возрастание).

Вход функции
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

Выход функции (сортировка по убыванию, т. е. сначала самые последние операции)

[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

## Тестирование

# Для тестирования кода установите Pytest
```
poetry add --group dev pytest
```
# Установите Code coverage для расчета процента протестированного кода
```
poetry add --group dev pytest-cov
```
# Запуск Code coverage
```commandline
pytest --cov
```
# Чтобы сгенерировать отчет о покрытии в HTML-формате, используйте следующую команду
```commandline
pytest --cov=src --cov-report=html
```
Отчет будет сгенерирован в папке
```
htmlcov
```
 и храниться в файле с названием 
```
index.html
